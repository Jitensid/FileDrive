(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{228:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return ue}));var n=t(0),l=t.n(n),r=t(12),c=t(205),s=t(232),o=t(227),i=t(224),m=t(225),u=t(210),d=t(207),p=t(206),E=t(169),f=t.n(E),h=t(211);var g=function(e){return l.a.createElement(h.a,{color:"inherit",onClick:()=>{e.handleThemeChange()}},l.a.createElement(f.a,null))},b=t(175),k=t(215),v=t(170),F=t.n(v);var w=function(){const[e,a]=l.a.useState(null),t=()=>{a(null)};return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{color:"inherit",onClick:e=>{a(e.currentTarget)}},l.a.createElement(F.a,null)),l.a.createElement(b.a,{id:"simple-menu",anchorEl:e,keepMounted:!0,open:Boolean(e),onClose:t},l.a.createElement(k.a,{onClick:()=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),t(),window.location.reload()}},"Logout")))},x=t(216),S=t(171),C=t.n(S),y=t(212),A=t(93),I=t(32);const j=Object(n.createContext)(),O=({children:e})=>{const[a,t]=Object(n.useState)({open:!1,message:""});return l.a.createElement(j.Provider,{value:{snackbarstate:a,setsnackbarstate:t}},e)},N=Object(c.a)(()=>({circularButton:{alignItems:"center",borderRadius:25,width:150,height:50},iconbtn:{alignContent:"left",marginRight:"10px"},input:{display:"none"}}));var B=function(e){const a=N(),t=Object(n.useContext)(j);return l.a.createElement(l.a.Fragment,null,l.a.createElement("input",{className:a.input,id:"contained-button-file",type:"file",onChange:a=>{let n=a.target.files[0];const l=new FormData;l.append("file",n),Object(I.trackPromise)(A.a.AxiosApiInstance.post("api/fileupload/",l).then(a=>{const n=e.backendFiles.slice(),l=a.data;for(var r=n.length-1;r>=0;--r)n[r].filename===l.filename&&n.splice(r,1);n.unshift(l),e.setbackendFiles(n),t.setsnackbarstate({message:"File Uploaded Successfully",open:!0})}))},enctype:"multipart/form-data"}),l.a.createElement("label",{htmlFor:"contained-button-file"},l.a.createElement(y.a,{variant:"contained",component:"span",className:a.circularButton},l.a.createElement(C.a,{className:a.iconbtn}),"Add File")))},D=t(219),R=t(220),L=t(218),P=t(217),_=t(135),z=t.n(_),T=t(7),H=t.n(T);function U(e){return l.a.createElement(d.a,{component:"h2",variant:"h6",color:"secondary",gutterBottom:!0},e.children)}U.propTypes={children:H.a.node};var K=t(172),M=t.n(K),G=t(213);var J=e=>{const[a,t]=l.a.useState(null),r=Object(n.useContext)(j),c=()=>{t(null)},s=a=>{console.log(window.location.pathname);for(var t=e.backendFiles.length-1;t>=0;t--)if(e.backendFiles[t].filename===a)return console.log(e.backendFiles[t]),t;return 0},o=(a,t,n)=>{Object(I.trackPromise)(A.a.AxiosApiInstance.post("api/changefilestarstatus/",{filename:a}).then(()=>{const a=e.backendFiles.slice();a[t].is_starred=n,"/starred"===window.location.pathname&&a.splice(t,1),e.setbackendFiles(a),r.setsnackbarstate({message:!0===n?"Added to Starred Files":"Removed from Starred Files",open:!0})}))};return l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{onClick:e=>{t(e.currentTarget)}},l.a.createElement(M.a,null," ")),l.a.createElement(b.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:c},l.a.createElement(k.a,{onClick:c}," ",l.a.createElement(G.a,{style:{textDecoration:"inherit"},href:e.uploadedfile.file,color:"inherit",download:!0},"Download")," "),(i=e.uploadedfile).is_starred?l.a.createElement(k.a,{onClick:()=>{return e=i.filename,a=s(e),o(e,a,!1),void c();var e,a}},"Remove from Starred Files"):l.a.createElement(k.a,{onClick:()=>{return e=i.filename,a=s(e),o(e,a,!0),void c();var e,a}},"Add to Starred Files"),l.a.createElement(k.a,{onClick:()=>{return a=e.uploadedfile.filename,Object(I.trackPromise)(A.a.AxiosApiInstance.post("api/deletefile/",{filename:a}).then(t=>{const n=e.backendFiles.slice();for(var l=n.length-1;l>=0;--l)n[l].filename===a&&n.splice(l,1);e.setbackendFiles(n),r.setsnackbarstate({message:"File Deleted Successfully",open:!0})})),void c();var a}},"Delete")));var i},Y=t(35);const q=()=>l.a.createElement(P.a,null,l.a.createElement(L.a,null,"Name"),l.a.createElement(L.a,null,"Date"),l.a.createElement(L.a,null,"More"),l.a.createElement(L.a,{align:"right"},"Size"));var W=e=>(Object(n.useEffect)(()=>{Object(I.trackPromise)(A.a.AxiosApiInstance.post("api/fetchfiles/",{}).then(a=>{e.setbackendFiles(a.data)}))},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(U,null," Your Files "),l.a.createElement(Y.a,null),l.a.createElement(D.a,{size:"small"},l.a.createElement(R.a,null,l.a.createElement(q,null),e.backendFiles.map((a,t)=>l.a.createElement(P.a,{key:t},l.a.createElement(L.a,null," ",l.a.createElement(h.a,null,l.a.createElement(z.a,null," ")),a.filename),l.a.createElement(L.a,null,a.created),l.a.createElement(L.a,null,l.a.createElement(J,{uploadedfile:a,backendFiles:e.backendFiles,setbackendFiles:e.setbackendFiles})),l.a.createElement(L.a,{align:"right"},a.size/1e3," KB")))))));const X=()=>l.a.createElement(P.a,null,l.a.createElement(L.a,null,"Name"),l.a.createElement(L.a,null,"Date"),l.a.createElement(L.a,null,"More"),l.a.createElement(L.a,{align:"right"},"Size"));var V=e=>(Object(n.useEffect)(()=>{Object(I.trackPromise)(A.a.AxiosApiInstance.post("api/fetchstarredfiles/",{}).then(a=>{e.setbackendFiles(a.data)}))},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(U,null," Your Starred Files "),l.a.createElement(Y.a,null),l.a.createElement(D.a,{size:"small"},l.a.createElement(R.a,null,l.a.createElement(X,null),e.backendFiles.map((a,t)=>l.a.createElement(P.a,{key:t},l.a.createElement(L.a,null," ",l.a.createElement(h.a,null,l.a.createElement(z.a,null," ")),a.filename),l.a.createElement(L.a,null,a.created),l.a.createElement(L.a,null,l.a.createElement(J,{uploadedfile:a,backendFiles:e.backendFiles,setbackendFiles:e.setbackendFiles})),l.a.createElement(L.a,{align:"right"},a.size/1e3," KB"))))))),Q=t(230),Z=t(233);var $=()=>{const e=Object(n.useContext)(j),a=(a,t)=>{"clickaway"!==t&&e.setsnackbarstate({message:"",open:!1})};return l.a.createElement(Z.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:e.snackbarstate.open,autoHideDuration:5e3,onClose:a},l.a.createElement(Q.a,{elevation:6,variant:"filled",onClose:a,severity:"info"},e.snackbarstate.message))},ee=t(222),ae=t(223),te=t(173),ne=t.n(te),le=t(174),re=t.n(le),ce=t(221),se=t(24);const oe=l.a.createElement(l.a.Fragment,null,l.a.createElement(ce.a,null),l.a.createElement(se.c,{to:"/",style:{textDecoration:"none",color:"unset"}},l.a.createElement(x.a,{button:!0},l.a.createElement(ee.a,null,l.a.createElement(ne.a,null),l.a.createElement(ae.a,{style:{marginLeft:"10px"},primary:"Dashboard"})))),l.a.createElement(ce.a,null),l.a.createElement(se.c,{to:"/starred",style:{textDecoration:"none",color:"unset"}},l.a.createElement(x.a,{button:!0},l.a.createElement(ee.a,null,l.a.createElement(re.a,null),l.a.createElement(ae.a,{style:{marginLeft:"10px"},primary:"Starred"})))),l.a.createElement(ce.a,null));var ie=t(3);const me=Object(c.a)(e=>({root:{display:"flex"},toolbarIcon:{display:"flex",alignItems:"left",justifyContent:"flex-start",padding:"0 8px",...e.mixins.toolbar},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - 240px)",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}));function ue(e){const a=me(),[t,c]=Object(n.useState)([]);return l.a.createElement(O,null,l.a.createElement("div",{className:a.root},l.a.createElement(i.a,{position:"absolute",className:Object(r.a)(a.appBar,a.appBarShift)},l.a.createElement(m.a,null,l.a.createElement(d.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:a.title},"React Drive"),l.a.createElement(g,{handleThemeChange:e.handleThemeChange}),l.a.createElement(w,null))),l.a.createElement(s.a,{variant:"permanent",classes:{paper:Object(r.a)(a.drawerPaper)},open:!0},l.a.createElement("div",{className:a.toolbarIcon},l.a.createElement("p",null," Position for the Logo ")),l.a.createElement(u.a,null," ",l.a.createElement(x.a,null," ",l.a.createElement(B,{backendFiles:t,setbackendFiles:c})," ")," "),l.a.createElement(u.a,null,oe)),l.a.createElement("main",{className:a.content},l.a.createElement("div",{className:a.appBarSpacer}),l.a.createElement(p.a,{maxWidth:"lg",className:a.container},l.a.createElement(ie.b,{path:"/",exact:!0,render:()=>l.a.createElement(W,{backendFiles:t,setbackendFiles:c})}),l.a.createElement(ie.b,{path:"/starred",render:()=>l.a.createElement(V,{backendFiles:t,setbackendFiles:c})}),l.a.createElement(o.a,{pt:4}),l.a.createElement($,null)))))}},93:function(e,a,t){"use strict";var n=t(112),l=t.n(n),r="";"localhost"!==location.hostname&&"http://127.0.0.1"!==window.location||(r="http://127.0.0.1:8000/",r="http://127.0.0.1:8080/"),l.a.defaults.baseURL=r;const c=l.a.create({baseURL:r,timeout:5e4});c.defaults.xsrfHeaderName="X-CSRFTOKEN",c.defaults.xsrfCookieName="csrftoken",c.defaults.withCredentials=!0,c.interceptors.request.use(e=>{const a=localStorage.getItem("access_token");return a&&(e.headers.Authorization="Bearer "+a),e},e=>{Promise.reject(e)}),c.interceptors.response.use(e=>(alert("Access Token was Valid !!! "+JSON.stringify(e)),e),e=>{if((403===e.response.status||401===e.response.status)&&e.response&&e.config)return l.a.post("api/token/refresh/",{refresh:localStorage.getItem("refresh_token")}).then(a=>{if(201===a.status||200===a.status)return alert("Got new Access Token !!!"),localStorage.setItem("access_token",a.data.access),e.config.headers.Authorization="Bearer "+localStorage.getItem("access_token"),c.request(e.config)}).catch(e=>{localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),alert("You need to Login Again !!!"),window.location.reload()})});const s=l.a.create({baseURL:r,timeout:5e4});s.defaults.xsrfHeaderName="X-CSRFTOKEN",s.defaults.xsrfCookieName="csrftoken",s.defaults.withCredentials=!0,s.interceptors.response.use(e=>e,e=>Promise.reject(e));const o=l.a.create({baseURL:r,timeout:5e4});o.interceptors.response.use(e=>(alert("Login Successful!"),localStorage.setItem("refresh_token",e.data.refresh),localStorage.setItem("access_token",e.data.access),window.location.href="/",e),e=>Promise.reject(e)),a.a={AxiosApiInstance:c,LoginAxiosApiInstance:o,RegisterAxiosApiInstance:s}}}]);